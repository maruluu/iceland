<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†°å³¶12å¤©è¡Œç¨‹</title>
    <style>
        /* --- Base Styles --- */
        html {
            font-size: 16px;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: #f0f2f5;
            color: #333;
            -webkit-text-size-adjust: 100%;
        }
        .page-container {
            max-width: 100%;
            margin: 0 auto;
            background: #fff;
        }
        header {
            background-color: #005792;
            color: white;
            padding: 1rem 0.75rem;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 1.5em;
        }

        /* --- Tabs --- */
        .tab-container {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            background-color: #e9ecef;
            border-bottom: 1px solid #dee2e6;
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS for tabs */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* Internet Explorer 10+ */
        }
        .tab-container::-webkit-scrollbar { /* WebKit */
            display: none;
        }
        .tab-button {
            background-color: #e9ecef;
            color: #005792;
            border: none;
            padding: 0.75rem 1rem;
            text-align: center;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s, color 0.3s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .tab-button:not(:last-child) {
             border-right: 1px solid #d1d9e0;
        }
        .tab-button:hover {
            background-color: #d1d9e0;
        }
        .tab-button.active {
            background-color: #005792;
            color: white;
            font-weight: bold;
            border-bottom: 3px solid #ffc107;
        }

        /* --- Tab Content --- */
        .tab-content {
            display: none;
            padding: 1rem 0.75rem;
            animation: fadeIn 0.5s;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Special style for Day 0 (Departure Day) tab content */
        .tab-content.departure-day-content {
            /* ç§»é™¤ç‰¹æ®Šåº•è‰²ï¼Œèˆ‡å…¶ä»–å¤©ç›¸åŒ */
            background-color: inherit;
        }
        .departure-day-content .itinerary-item {
            /* ç§»é™¤ç‰¹æ®Š item æ¨£å¼ï¼Œèˆ‡å…¶ä»–å¤©ç›¸åŒ */
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
        }


        /* --- Itinerary Item Styles --- */
        h2 {
            color: #005792;
            border-bottom: 2px solid #005792;
            padding-bottom: 0.5rem;
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.3em;
        }
        ul.itinerary-list {
            list-style-type: none;
            padding-left: 0;
        }
        li.itinerary-item {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background-color: #f9f9f9;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        li.itinerary-item strong {
            color: #005792;
            display: block;
            margin-bottom: 0.3rem;
            font-size: 1.1em;
        }
        li.itinerary-item strong a {
            color: #005792;
            text-decoration: none;
        }
        li.itinerary-item strong a:hover {
            text-decoration: underline;
            color: #003f6b;
        }
        .item-category {
            font-weight: bold; display: inline-block; padding: 0.2rem 0.5rem;
            border-radius: 4px; color: white; margin-right: 0.5rem; font-size: 0.85em;
            margin-bottom: 0.3rem;
        }
        /* Original Categories */
        .cat-mov { background-color: #6c757d; }
        .cat-eat { background-color: #fd7e14; }
        .cat-see { background-color: #20c997; }
        .cat-stay { background-color: #17a2b8; }
        .cat-act { background-color: #ffc107; color: #333;}
        .cat-default { background-color: #6c757d;}

        /* New Categories for Day 0 */
        .cat-journey-overview { background-color: #005792; color: white; } /* Theme blue */
        .cat-flight-segment { background-color: #0d6efd; color: white; } /* Bright blue, e.g. Bootstrap primary */
        .cat-layover-time { background-color: #adb5bd; color: #212529; } /* Lighter grey, e.g. Bootstrap gray-500 */
        .cat-arrival-next-leg { background-color: #198754; color: white; } /* Green, e.g. Bootstrap success */


        .item-description { margin-top: 0.5rem; font-size: 0.9em; color: #555; }
        .item-photo-thumbnail {
            max-width: 100px;
            max-height: 75px;
            margin-top: 0.5rem;
            border-radius: 4px;
            display: block;
            object-fit: cover;
            cursor: pointer;
            border: 1px solid #ccc;
        }
        .item-url a { color: #007bff; text-decoration: none; font-size: 0.85em;}
        .item-url a:hover { text-decoration: underline; }
        .driving-info {
            font-style: italic; color: #555; margin: 0.6rem 0; padding: 0.6rem;
            background-color: #eef7ff; border-left: 3px solid #007bff; border-radius: 4px;
            font-size: 0.9em;
        }
        .map-container { width: 100%; height: 350px; margin-top: 1rem; border: 1px solid #ccc; border-radius: 4px;}
        .important-notes { background-color: #fff3cd; border-left: 5px solid #ffc107; padding: 0.75rem; margin: 1rem 0.75rem; border-radius: 4px; font-size: 0.9em;}

        /* --- Image Modal Styles --- */
        .image-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            padding-top: 5vh; /* Use vh for vertical centering */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
            text-align: center; /* Center the image block */
        }
        .image-modal-content {
            margin: auto;
            display: inline-block; /* Allows text-align center to work */
            max-width: 95%;
            max-height: 90vh; /* Limit height based on viewport */
            animation-name: zoom;
            animation-duration: 0.3s;
        }
        @keyframes zoom {
            from {transform:scale(0.5); opacity: 0;}
            to {transform:scale(1); opacity: 1;}
        }
        .image-modal-close {
            position: absolute;
            top: 15px;
            right: 25px; /* Adjusted for better touch target */
            color: #f1f1f1;
            font-size: 2.5rem; /* Larger for touch */
            line-height: 1;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            padding: 5px; /* Easier to tap */
        }
        .image-modal-close:hover,
        .image-modal-close:focus {
            color: #bbb;
            text-decoration: none;
        }


        /* --- Desktop and larger screen adjustments --- */
        @media (min-width: 768px) {
            html { font-size: 17px; }
            .page-container {
                max-width: 1000px;
                margin: 20px auto;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                border-radius: 8px;
            }
            header { padding: 1.25rem; }
            header h1 { font-size: 2em; }
            .tab-container { flex-wrap: wrap; overflow-x: visible; }
            .tab-button { padding: 0.8rem 1.2rem; font-size: 0.95rem; }
            .tab-content { padding: 1.5rem; }
             .tab-content.departure-day-content {
                /* Ensure padding is consistent on desktop too if overridden */
                padding: 1.5rem;
            }
            .departure-day-content .itinerary-item {
                 padding: 1rem; /* Match general item padding on desktop */
            }
            li.itinerary-item { padding: 1rem; }
            .item-photo-thumbnail { max-width: 120px; max-height: 90px; }
            .map-container { height: 450px; }
            .important-notes { font-size: 15px}
            .image-modal-content { max-width: 700px; } /* Modal image size on desktop */
        }
    </style>
</head>
<body>
    <div class="page-container">
        <header>
            <h1>ä¾†å»å†°å³¶çœ‹æ¥µå…‰11å¤©è¡Œç¨‹</h1>
        </header>

        <div class="important-notes">
            <ul>
                <li>é»æ“Šæ™¯é»åç¨±å¯åœ¨ Google åœ°åœ–ä¸­æ‰“é–‹è©²åœ°é»ã€‚</li>
                <li>é»æ“Šè¡Œç¨‹ä¸­çš„å°åœ–ç‰‡å¯æŸ¥çœ‹å¤§åœ–ã€‚</li>
            </ul>
        </div>

        <div class="tab-container" id="tabContainer">
            <!-- Tab buttons will be generated here by JavaScript -->
        </div>

        <div id="tabContentContainer">
            <!-- Tab content will be generated here by JavaScript -->
        </div>
    </div>

    <!-- The Modal for Images -->
    <div id="myImageModal" class="image-modal">
        <span class="image-modal-close">&times;</span>
        <img class="image-modal-content" id="imgModalSrc" alt="æ”¾å¤§åœ–ç‰‡">
    </div>
    <script src="const.js?v=1" type="module"></script>
    <script>
    // --- Your Itinerary Data ---
    const allItineraryData = [
        // Day 0 - Updated with flight info
        {
            dayGroup: "Day 0",
            dayTitle: "Day 0: å‡ºç™¼å‰å¾€æ­æ´² (10/4 é€±å…­)",
            isSpecialDay: "departure", // Flag for special styling
            items: [
                { åœ°é»: "âœˆï¸ å°åŒ—(TPE) â†’ é˜¿å§†æ–¯ç‰¹ä¸¹(AMS)", é¡åˆ¥: "ğŸŒŸ è¡Œç¨‹ç¸½è¦½", æè¿°: "ç¶“é¦™æ¸¯(HKG)è½‰æ©Ÿã€‚ç¸½é£›è¡Œèˆ‡è½‰æ©Ÿæ™‚é–“ç´„ 17å°æ™‚ 5åˆ†é˜ã€‚" },
                { åœ°é»: "ğŸš— ", æè¿°: "å¾å®¶è£¡å‰å¾€æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ (TPE)", é¡åˆ¥: "ğŸš— ç§»å‹•" },
                { åœ°é»: "âœˆï¸ åœ‹æ³°èˆªç©º CX531", æè¿°: "å°åŒ—(TPE) 19:50 â†’ é¦™æ¸¯(HKG) 22:00. é£›è¡Œ 2h 10m.", é¡åˆ¥: "âœˆï¸ é£›è¡Œ" },
                { åœ°é»: "â³é¦™æ¸¯(HKG) è½‰æ©Ÿ", æè¿°: "åœç•™ 1h 15m.", é¡åˆ¥: "â³ è½‰æ©Ÿ" },
                { åœ°é»: "âœˆï¸ åœ‹æ³°èˆªç©º CX271", æè¿°: "é¦™æ¸¯(HKG) 23:15 â†’ é˜¿å§†æ–¯ç‰¹ä¸¹(AMS) 06:55 (+1æ—¥). é£›è¡Œ 13h 40m. æŠµé”æ—¥æœŸ: 10/5 (é€±æ—¥).", é¡åˆ¥: "âœˆï¸ é£›è¡Œ" },
                { åœ°é»: "â³10/5(æ—¥) 06:55", æè¿°: " æŠµé”é˜¿å§†æ–¯ç‰¹ä¸¹ (AMS)", é¡åˆ¥: "ğŸ æŠµé”å¾…è½‰"},	
                { åœ°é»: "âœˆï¸ 10/5(æ—¥) 12:30 ", æè¿°: "Play èˆªç©º AMS -> KEF 13:50", é¡åˆ¥: "âœˆï¸ é£›è¡Œ"}
            ]
        },
        // Day 1
        { dayGroup: "Day 1", dayTitle: "Day 1: 10/5(æ—¥)é›·å…‹é›…ç¶­å…‹ ", mapCenter: { lat: 64.05, lng: -22.0 }, mapZoom: 9, items: [
            {åœ°é»: "å‡±å¤«æ‹‰ç¶­å…‹åœ‹éš›æ©Ÿå ´ (KEF)", æè¿°:"èˆªç­ 13:50 æŠµé”", é¡åˆ¥: "ğŸš— ç§»å‹•", lat: 63.9850, lng: -22.6056, mapLabel: "KEF æ©Ÿå ´", mapPriority: 1}, // Updated description slightly
            {åœ°é»: "ç§Ÿè»Š", é¡åˆ¥: "", æè¿°:"å¸‚ä¸­å¿ƒçš„åœè»Šæ ¼æ˜¯è¦æ”¶è²»çš„ï¼Œæ”¶è²»æ™‚é–“æ˜ŸæœŸä¸€è‡³äº”09:00~18:00ï¼›æ˜ŸæœŸå…­10:00~16:00ï¼Œå…¶é¤˜æ™‚é–“å‰‡æ˜¯å…è²»" }, // Consider "ğŸš— æ´»å‹•" or similar
            {åœ°é»: "ç§»å‹•: æ©Ÿå ´ â†’ å¸‚å€ (40m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Svarta Kaffid éºµåŒ…æ¹¯", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180706200030_83.jpg", é¡åˆ¥: "ğŸ§ åƒå–", lat: 64.14446, lng: -21.92346, mapLabel: "Svarta KaffiÃ°", mapPriority: 2, ç‡Ÿæ¥­æ™‚é–“: "11:30â€“22:00"},
            {åœ°é»: "Braud & CoéºµåŒ…åº—", æè¿°:"æœ‰å¾ˆå¤šåˆ†åº—",  ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180503165237_63.jpg", é¡åˆ¥: "ğŸ§ åƒå–", lat: 64.1440, lng: -21.9280, mapLabel: "BrauÃ° & Co.", mapPriority: 3, ç‡Ÿæ¥­æ™‚é–“: "06:30â€“17:00"},
            {åœ°é»: "å¸‚å€æ¡è²·", é¡åˆ¥: "â›± æ™¯é»", lat: 64.1470, lng: -21.9400, mapLabel: "Reykjavik City Center"},
            {åœ°é»: "Grettir Guesthouse Downtown Charm", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "<span style='color:green;'>&#10003;</span>å»šæˆ¿ï¼Œ<span style='color:red;'>&#10007;</span>æ—©é¤", ç…§ç‰‡:"https://cf.bstatic.com/xdata/images/hotel/max1280x900/606428941.jpg?k=b320806e5ae8120e9e96f85a42fd59ede02a2254b487d767a4381df5e47ada66&o=&hp=1" ,ç¶²å€: "https://www.booking.com/Share-NeX74T", lat: 64.14519954369655, lng: -21.92785747425269, mapLabel: "Grettir Guesthouse", mapPriority: 4},
        ]},
        // Day 2
        { dayGroup: "Day 2", dayTitle: "Day 2: 10/6(ä¸€)é»ƒé‡‘åœˆ", mapCenter: { lat: 64.20, lng: -20.7 }, mapZoom: 9, items: [
            {åœ°é»: "ç§»å‹•: é›·å…‹é›…ç¶­å…‹ â†’ è¾›æ ¼éŸ‹å¾·åˆ©åœ‹å®¶å…¬åœ’ (ç´„ 1h 45m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "è¾›æ ¼éŸ‹å¾·åˆ©åœ‹å®¶å…¬åœ’Ãingvellir National Park- P1åœè»Šå ´", æè¿°: "(åœç•™ç´„ 1~1.5 å°æ™‚)ï¼Œä¸–ç•Œä¸Šå”¯ä¸€åœ¨æµ·å¹³é¢ä»¥ä¸Šçš„åŒ—ç¾æ¿å¡Šèˆ‡æ­äºæ¿å¡Š...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/b60bf02b2f8e7debf6d89af4ee21b3d6.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.25579, lng: -21.13547,   mapLabel: "Ãingvellir Parking P1", mapPriority: 1},
            {åœ°é»: "é˜¿çˆ¾æ›¼ç´é™¡å´– (AlmannagjÃ¡)", æè¿°: "åœ¨è¾›æ ¼éŸ‹å¾·åˆ©åœ‹å®¶å…¬åœ’å…§ï¼ŒåŒ—ç¾ç‰ˆå¡Šã€æ­äºæ¿å¡Šåˆ†ç•Œè™•...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/9297d22ba307260f2a0b01ea7db764f8.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.2659, lng: -21.1205, mapLabel: "AlmannagjÃ¡", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: è¾›æ ¼éŸ‹å¾·åˆ© â†’ Bruarfoss (ç´„ 40m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "è—è‰²ç€‘å¸ƒ Bruarfoss", ç…§ç‰‡: "https://mlz24bjzzgqm.i.optimole.com/w:463/h:694/q:mauto/dpr:2.0/ig:avif/https://dragonflytravelblog.com/wp-content/uploads/2024/07/DSC08814.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.26284, lng: -20.51917, mapLabel: "BrÃºarfoss Waterfall Parking", mapPriority: 3},
            {åœ°é»: "ç§»å‹•: Bruarfoss â†’ é–“æ­‡æ³‰ (ç´„ 25m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "å²æ‰˜å…‹é–“æ­‡æ³‰Strokkur Geyser", æè¿°: "æ°´æŸ±é«˜åº¦ç´„è½åœ¨15-20å…¬å°º...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/97c71f9eebe535acfed9aaa4f815907c.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.3127, lng: -20.3000, mapLabel: "Strokkur", mapPriority: 4},
            {åœ°é»: "ç§»å‹•: é–“æ­‡æ³‰ â†’ å¤ä½›æ–¯ç€‘å¸ƒ (ç´„ 10m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "å¤ä½›æ–¯ç€‘å¸ƒ Gullfoss é»ƒé‡‘", æè¿°: "ä¸–ç•Œåå¤§ç€‘å¸ƒä¹‹ä¸€...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/6772ba08ae239a0952383c81195d6dd2.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.3271, lng: -20.1199, mapLabel: "Gullfoss Falls", mapPriority: 5},
            {åœ°é»: "GullfossKaffi Ehfç¾Šè‚‰æ¹¯", æè¿°: "Gullfoss Waterfall æ—é‚Š", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/9c600eab4147cda40e9a7a0f9e68a57b.jpg", é¡åˆ¥: "ğŸ§ åƒå–", lat: 64.3250, lng: -20.1240, mapLabel: "Gullfoss Kaffi"},
            {åœ°é»: "ç§»å‹•: é»ƒé‡‘ç€‘å¸ƒ â†’ å¡çˆ¾ç¦æ–¯ (ç´„ 1h)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Hotel Selfoss", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "Eyravegur 2, 800 Selfoss, Iceland", ç¶²å€: "https://hotelselfoss.is", lat: 63.9341, lng: -20.9990, mapLabel: "Hotel Selfoss"}
        ]},
        // Day 3
        { dayGroup: "Day 3", dayTitle: "Day 3: 10/7(äºŒ)å—éƒ¨", mapCenter: { lat: 63.70, lng: -20.0 }, mapZoom: 8, items: [
            {åœ°é»: "ç§»å‹•: è³½çˆ¾å¼—æ–¯ â†’ é‡æºªæº«æ³‰ (ç´„ 20m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Reykjadalur é‡æºªæº«æ³‰", ç…§ç‰‡: "https://mlz24bjzzgqm.i.optimole.com/w:768/h:512/q:mauto/dpr:2.0/ig:avif/https://dragonflytravelblog.com/wp-content/uploads/2024/07/reykjadalur.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.0238, lng: -21.2116, mapLabel: "Reykjadalur Hot Spring Thermal River Parking", mapPriority: 1},
            {åœ°é»: "ç§»å‹•: è³½çˆ¾å¼—æ–¯ â†’ ç«å£æ¹– (ç´„ 20m - è‹¥å¾Selfosså‡ºç™¼)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "å‡±ç‘æ–¯ç«å£æ¹– Kerid Crater", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180427004523_29.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.0413, lng: -20.8850, mapLabel: "KeriÃ°", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: ç«å£æ¹– â†’ å¡é‡Œé›…è˜­ç€‘å¸ƒ (ç´„ 1h 10m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "å¡é‡Œé›…è˜­ç€‘å¸ƒ Seljalandsfoss", æè¿°: "æ°´ç°¾æ´ç€‘å¸ƒï¼Œæœ‰å»æ‰€", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180507121849_84.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 63.6156, lng: -19.9886, mapLabel: "Seljalandsfoss", mapPriority: 3},
            {åœ°é»: "ç§»å‹•: å¡é‡Œé›…è˜­ç€‘å¸ƒ â†’ æ–¯ç§‘åŠ çˆ¾ç€‘å¸ƒ (ç´„ 31m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "æ–¯ç§‘åŠ çˆ¾ç€‘å¸ƒ Skogafoss", æè¿°: "é«˜äººæ°£ã€Šç™½æ—¥å¤¢å†’éšªç‹ã€‹æ‹æ”å ´æ™¯...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/b5354d87a4320ee73ff7fafc4ba00d30.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 63.5321, lng: -19.5114, mapLabel: "SkÃ³gafoss", mapPriority: 4},
            {åœ°é»: "ç§»å‹•: æ–¯ç§‘åŠ çˆ¾ç€‘å¸ƒ â†’ é»‘æ²™ç˜ (ç´„ 32m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Reynisfjaraé»‘æ²™ç˜", æè¿°: "æµ·è•æ´æ˜¯åƒå¹´å‰ç«å±±å™´ç™¼ä¸‹çš„éºè·¡...", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/9ed7a628e2f547092920693ada18878e.jpg, https://bobbyworld.tw/wp-content/uploads/pixnet/4da10f837463f77bb344b3c267fa4950.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 63.4027, lng: -19.0452, mapLabel: "Reynisfjara Beach", mapPriority: 5},
            {åœ°é»: "Black Beach Suites, VÃ­k", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "Reynishverfisvegur, 871 VÃ­k, Iceland", ç¶²å€: "https://www.booking.com/Share-by4zAKY", lat: 63.4070, lng: -19.0040, mapLabel: "Black Beach Suites"}
        ]},
        // Day 4
        { dayGroup: "Day 4", dayTitle: "Day 4: 10/8(ä¸‰)ç¶­å…‹å‘¨é‚Šèˆ‡å†°æ´", mapCenter: { lat: 63.6, lng: -18.5 }, mapZoom: 9, items: [
            {åœ°é»: "Vik é›†åˆ 10:00 å¡ç‰¹æ‹‰ç«å±±å†°æ´ 3h", å°å¹£: "7,000", ç¶²å€:"https://adventures.is/iceland/day-tours/ice-caves/katla-ice-cave-tour-under-the-volcano/", ç…§ç‰‡: "https://image.kkday.com/image/get/s1.kkday.com/product_181018/20240527121341_7vFCr/jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 63.4177, lng: -18.9976, mapLabel: "ç¶­å…‹(å†°æ´é›†åˆ)", mapPriority: 1}, // Changed â›± æ™¯é» to ğŸ­ æ´»å‹•
            {åœ°é»: "ç§»å‹•: Vik â†’ ç¾½æ¯›å³½è°· (ç´„ 50m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "ç¾½æ¯›å³½è°· (Fjadrargljufur Canyon)", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/c62297747249d35459e0fde974ee8204.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 63.7713, lng: -18.1719, mapLabel: "FjaÃ°rÃ¡rgljÃºfur", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: ç¾½æ¯›å³½è°· â†’ Skaftafell å€åŸŸ (ç´„ 1h)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "ç„æ­¦å²©é»‘ç€‘å¸ƒï¼ˆSvartifoss", æè¿°: "åˆ°æ™‚å€™æ±ºå®šè¦ä¸è¦å»", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20230326222137_3.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.01637, lng: -16.9691857, mapLabel: "Svartifoss", mapPriority: 3},
            {åœ°é»: "ä½ Skaftafellsstofa é™„è¿‘", æè¿°: "ä½†ä½å®¿é¸æ“‡å¾ˆå°‘å¾ˆå°‘", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 64.0162, lng: -16.9661, mapLabel: "Skaftafell Campground (ä½å®¿å€åƒè€ƒ)", mapPriority: 4}
        ]},
        // Day 5
        { dayGroup: "Day 5", dayTitle: "Day 5: 10/9(å››)å†°å·å¥è¡Œèˆ‡å†°æ²³æ¹–", mapCenter: { lat: 64.03, lng: -16.5 }, mapZoom: 9, items: [
            {åœ°é»: "Skaftafell å†°å·å¥è¡Œ 5h 11:00", ç¶²å€: "https://cn.guidetoiceland.is/connect-with-locals/6640/iceland-local-tour-skaftafell-svinafellsjokull-glacier-hiking-experience", ç…§ç‰‡: "https://adventures.is/media/237243/iceland-skaftafell-glacier-hiking-on-spikes.jpg?anchor=center&mode=crop&width=330&height=188&format=webp&quality=80&rnd=133728672360000000", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 64.0162, lng: -16.9661, mapLabel: "Skaftafell Visitor Centre (å¥è¡Œé›†åˆ)", mapPriority: 1}, // Changed â›± æ™¯é» to ğŸ­ æ´»å‹•
            {åœ°é»: "ç§»å‹•: Skaftafell â†’ å†°æ²³æ¹– (ç´„ 50m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "ä½ å†°æ²³æ¹–é™„è¿‘", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 64.0700, lng: -16.2200, mapLabel: "Hali Country Hotel", ç¶²å€: "https://www.booking.com/Share-8VGzua"},
            {åœ°é»: "Fosshotel Glacier Lagoon", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "Hnappavellir, 785 Ã–rÃ¦fi, Iceland", ç¶²å€: "https://www.booking.com/Share-8VGzua", lat: 64.2100, lng: -16.6000, mapLabel: "Fosshotel Glacier Lagoon"}
        ]},
        // Day 6
        { dayGroup: "Day 6", dayTitle: "Day 6: 10/10(äº”) æ±é‚Š - å†°æ²³æ¹–åˆ°åŸƒä¼Šçˆ¾æ–¯å¡”æ¿Ÿ", mapCenter: { lat: 64.7, lng: -15.3 }, mapZoom: 7, items: [
            {åœ°é»: "Jokulsarlonå†°æ²³æ¹–ç¨æœ¨èˆŸ", å°å¹£: "2382", ç…§ç‰‡: "https://mlz24bjzzgqm.i.optimole.com/w:768/h:512/q:mauto/dpr:2.0/ig:avif/https://dragonflytravelblog.com/wp-content/uploads/2024/08/IMG_0303.jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 64.0484, lng: -16.1794, mapLabel: "JÃ¶kulsÃ¡rlÃ³n", mapPriority: 1}, // Changed â›± æ™¯é» to ğŸ­ æ´»å‹•
            {åœ°é»: "é‘½çŸ³å†°æ²™ç˜", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20230326222910_99.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.0450, lng: -16.1780, mapLabel: "Diamond Beach", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: å†°æ²³æ¹– â†’ Vestrahorn (ç´„ 1h 21m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Vestrahorn è™è å±± x ç¶­äº¬äººèšè½ Viking Village", ç…§ç‰‡: "https://kavana.tw/wp-content/uploads/pixnet/f2174d2460d318a9f09be7bb3a57b0db.jpg, https://kavana.tw/wp-content/uploads/pixnet/4cc7f163b96e90a32d2ab027110392b7.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.2470, lng: -14.9960, mapLabel: "Stokksnes (Vestrahorn Viewpoint)", mapPriority: 3},
            {åœ°é»: "PakkhÃºs Restaurant å°é¾è¦ æš«æ™‚é—œé–‰", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180628173749_56.jpg", é¡åˆ¥: "ğŸ§ åƒå–", lat: 64.2500, lng: -15.2080, mapLabel: "PakkhÃºs Restaurant (HÃ¶fn)"},
            {åœ°é»: "ç§»å‹•: Vestrahorn/HÃ¶fn â†’ åŸƒä¼Šçˆ¾æ–¯å¡”æ¿Ÿ (ç´„ 3h 18m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "ä½ åŸƒä¼Šçˆ¾æ–¯å¡”æ¿Ÿ", æè¿°: "å†°å³¶æ±é‚Šæœ€å¤§çš„åŸé®...", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 65.2669, lng: -14.4014, mapLabel: "EgilsstaÃ°ir", mapPriority: 4}
        ]},
        // Day 7
        { dayGroup: "Day 7", dayTitle: "Day 7: 10/11(å…­) åŒ—éƒ¨ - ç±³æ¹–å‘¨é‚Š", mapCenter: { lat: 65.6, lng: -16.0 }, mapZoom: 8, items: [
            {åœ°é»: "ç§»å‹•: åŸƒä¼Šçˆ¾æ–¯å¡”æ¿Ÿ â†’ SeyÃ°isfjÃ¶rÃ°ur (ä¾†å›ç´„ 1h)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "SeyÃ°isfjÃ¶rÃ°ur ç™½æ—¥å¤¢å†’éšªç‹å°é®", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20230408152422_67.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.2600, lng: -14.0100, mapLabel: "SeyÃ°isfjarÃ°arkirkja", mapPriority: 1},
            {åœ°é»: "ç§»å‹•: åŸƒä¼Šçˆ¾æ–¯å¡”æ¿Ÿ â†’ Viti (ç´„ 2h)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Viti ç¶­æç«å±±æ¹– ğŸ‘", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20230409130510_89.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.7165, lng: -16.7522, mapLabel: "VÃ­ti crater (Krafla)", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: Viti â†’ NÃ¡mafjall Hverir (ç´„ 11m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "NÃ¡mafjall Hverir ç«å±±åœ°ç†±è°·", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180529165813_72.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.6415, lng: -16.8093, mapLabel: "Hverir (NÃ¡mafjall)", mapPriority: 3},
            {åœ°é»: "æ´ç©´æº«æ³‰GrjÃ³tagjÃ¡", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180603221410_36.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.6262, lng: -16.8820, mapLabel: "GrjÃ³tagjÃ¡ cave", mapPriority: 4},
            {åœ°é»: "ç±³æ¹–æº«æ³‰", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180530184317_85.jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 65.6305, lng: -16.8480, mapLabel: "MÃ½vatn Nature Baths", mapPriority: 5}, // Changed â›± æ™¯é» to ğŸ­ æ´»å‹• (bathing is an activity)
            {åœ°é»: "Vogafjos Cafe", é¡åˆ¥: "ğŸ§ åƒå–", lat: 65.5913, lng: -16.9204, mapLabel: "VogafjÃ³s Farm Resort", mapPriority: 6},
            {åœ°é»: "VogafjÃ³s Farm Resort, MÃ½vatn", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "VogafjÃ³s, 660 MÃ½vatn, Iceland", ç¶²å€: "https://www.booking.com/Share-I4uimAK", lat: 65.6241, lng: -16.9228, mapLabel: "VogafjÃ³s Farm Resort"}
        ]},
        // Day 8
        { dayGroup: "Day 8", dayTitle: "Day 8: 10/12(æ—¥)ç±³æ¹–åˆ°é˜¿å…‹é›·é‡Œ", mapCenter: { lat: 65.65, lng: -17.5 }, mapZoom: 9, items: [
            {åœ°é»: "Hverfjall æƒ çˆ¾ç«å±± 2-3h", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180529132824_95.jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 65.6033, lng: -16.8734, mapLabel: "Hverfjall", mapPriority: 1}, // Hiking is an activity
            {åœ°é»: "é»‘è‰²åŸå ¡ Dimmuborgir", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180529221509_26.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.5911, lng: -16.9119, mapLabel: "Dimmuborgir", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: ç±³æ¹– â†’ Godafoss (ç´„ 50m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Godafossçœ¾ç¥ç€‘å¸ƒ", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180609144626_42.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.6828, lng: -17.5503, mapLabel: "GoÃ°afoss", mapPriority: 3},
            {åœ°é»: "ç§»å‹•: Godafoss -> Akureyri(Kaffi Ilmur ehf) (ç´„ 40m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Kaffi Ilmur ehf", é¡åˆ¥: "ğŸ§ åƒå–", æè¿°: "è‡ªåŠ©å¼Bufferåƒåˆ°é£½", å…‹æœ—:"2,290", lat: 65.6805, lng: -18.0903, mapLabel: "Kaffi Ilmur", mapPriority: 4},
            {åœ°é»: "Brynja å†°æ·‡æ·‹", æè¿°:"HafnarstrÃ¦ti è³¼ç‰©è¡—å¸‚å€æ™ƒæ™ƒ", é¡åˆ¥: "ğŸ§ åƒå–", lat: 65.6790, lng: -18.0970, mapLabel: "Brynja", mapPriority: 5},
            {åœ°é»: "SÃ¦luhÃºs Apartments & Houses, Akureyri", é¡åˆ¥: "ğŸ¡ ä½å®¿", æè¿°: "BÃºÃ°artrÃ¶Ã° 2, 600 Akureyri, Iceland", ç¶²å€: "https://www.booking.com/Share-5KDXEqD", lat: 65.6835, lng: -18.1050, mapLabel: "SÃ¦luhÃºs Apartments & Houses"}
        ]},
        // Day 9
        { dayGroup: "Day 9", dayTitle: "Day 9: 10/13(ä¸€) åŒ—å²¸é¢¨å…‰ (10/13)", mapCenter: { lat: 65.5, lng: -19.8 }, mapZoom: 8, items: [
            {åœ°é»: "ç§»å‹•: Akureyri â†’ BjÃ³rbÃ¶Ã°in SPA (ç´„ 31m)", æè¿°:"çœ‹è¦ä¸è¦å»ï¼Ÿ", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "BjÃ³rbÃ¶Ã°in SPA", å°å¹£:"4600", æè¿°: "æ³¡ 25åˆ†é˜ å…©äºº ï¼‹ ä¼‘æ¯å€èºº25åˆ†é˜...", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180613111632_26.jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 66.0698, lng: -18.5323, mapLabel: "BjÃ³rbÃ¶Ã°in - The Beer Spa"}, // SPA is an activity
            {åœ°é»: "ç§»å‹•: Akureyri â†’ GlaumbÃ¦r (ç´„ 1h 22m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Glaumbaer Museum è‰å±‹åšç‰©é¤¨", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180618141607_36.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.6085, lng: -19.5000, mapLabel: "GlaumbÃ¦r Farm & Museum", mapPriority: 1},
            {åœ°é»: "ç§»å‹•: GlaumbÃ¦r â†’ BlÃ¶nduÃ³skirkja (ç´„ 43m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Blonduoskirkja ç«å±±æ•™å ‚ã€é¯¨é­šæ•™å ‚", æè¿°: "å¯é †ä¾¿åŠ æ²¹", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180618141633_68.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 65.6580, lng: -20.2785, mapLabel: "BlÃ¶nduÃ³skirkja", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: BlÃ¶nduÃ³skirkja â†’ å·¨äººå³½è°· (ç´„ 37m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "å·¨äººå³½è°· (KolugljÃºfur Canyon)", é¡åˆ¥: "â›± æ™¯é»", lat: 65.3303, lng: -20.7008, mapLabel: "KolugljÃºfur Canyon", mapPriority: 3},
            {åœ°é»: "ä½ è¯å§†æ–¯å”å‰ï¼Ÿæˆ–è·¯ä¸Šé¸æ“‡", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 65.3967, lng: -20.9331, mapLabel: "Hvammstangi", mapPriority: 4}
        ]},
        // Day 10
        { dayGroup: "Day 10", dayTitle: "Day 10: 10/14(äºŒ) æ–¯å¥ˆå±±åŠå³¶", mapCenter: { lat: 64.85, lng: -23.3 }, mapZoom: 9, items: [
            {åœ°é»: "ç§»å‹•: è¯å§†æ–¯å”å‰ â†’ æ•™å ‚å±± (ç´„ 2h 36m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Kirkjufellsfoss æ•™å ‚å±±", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180620190950_46.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.9260, lng: -23.2719, mapLabel: "Kirkjufellsfoss", mapPriority: 1},
            {åœ°é»: "ç§»å‹•: æ•™å ‚å±± â†’ Ã“lafsvÃ­k (ç´„ 20m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Ã“lafsvÃ­kå°é®", æè¿°: "é€²å…¥æ–¯å¥ˆå±±åœ‹å®¶å…¬åœ’çš„æœ€å¾Œä¸€å€‹æ¯”è¼ƒå¤§çš„åŸé®", é¡åˆ¥: "â›± æ™¯é»", lat: 64.8940, lng: -23.7100, mapLabel: "Ã“lafsvÃ­k", mapPriority: 2},
            {åœ°é»: "ç§»å‹•: Ã“lafsvÃ­k â†’ SAXHÃ“LAR CRATER (ç´„ 20m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "SAXHÃ“LAR CRATER ç«å±±", æè¿°: "æ˜¯ä¸€åº§æ²ˆç¡400å¹´çš„ç«å±±", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180826212128_25.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.8510, lng: -23.9150, mapLabel: "SaxhÃ³ll Crater", mapPriority: 3},
            {åœ°é»: "VATNSHELLIR CAVE åœ°å¿ƒæ¢éšª", æè¿°: "æ¯å€‹å°æ™‚æœ‰ä¸€åœ˜ï¼Œç´„è«45åˆ†é˜", ç…§ç‰‡: "https://kavana.tw/wp-content/uploads/pixnet/f85425c596023b29c7f0d9089858b438.jpg", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 64.7520, lng: -23.8200, mapLabel: "Vatnshellir Cave", mapPriority: 4}, // Caving is an activity
            {åœ°é»: "Londrangar æ€ªç‰©æµ·å²¸", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180826212202_97.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.7360, lng: -23.7800, mapLabel: "LÃ³ndrangar", mapPriority: 5},
            {åœ°é»: "BÃRÃAR SAGA çŸ³å·¨äºº", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180826212210_84.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.7744, lng: -23.7791, mapLabel: "BÃ¡rÃ°ur SnÃ¦fellsÃ¡s (Arnarstapi)", mapPriority: 6},
            {åœ°é»: "ç§»å‹•: Arnarstapi â†’ Ytri Tunga (ç´„ 30m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Ytri Tunga æµ·è±¹æ²™ç˜", æè¿°: "å¤ªæ™šçš„è©±å¯ä»¥éš”å¤©ä¾†", ç…§ç‰‡: "https://icelandthebeautiful.com/wp-content/uploads/2020/01/Ytri-tunga-beach-snaefellsnes-west-iceland_DSC7489.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.8001, lng: -23.0346, mapLabel: "Ytri Tunga Beach", mapPriority: 7},
            {åœ°é»: "ä½ æ–¯å¥ˆå±±åŠå³¶", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 64.8900, lng: -23.2500, mapLabel: "GrundarfjÃ¶rÃ°ur (æ–¯å¥ˆå±±ä½å®¿åƒè€ƒ)", mapPriority: 8}
        ]},
        // Day 11
        { dayGroup: "Day 11", dayTitle: "Day 11: 10/15(ä¸‰)è¿”å›é›·å…‹é›…ç¶­å…‹ (10/15)", mapCenter: { lat: 64.5, lng: -22.5 }, mapZoom: 8, items: [
            {åœ°é»: "ç§»å‹•: æ–¯å¥ˆå±±åŠå³¶ â†’ Sky Lagoon (ç´„ 2h)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "Sky Lagoon", ç…§ç‰‡: "https://shiningchan-com.sfo3.digitaloceanspaces.com/wp-content/uploads/2024/10/scimgKj5yjW.webp", é¡åˆ¥: "ğŸ­ æ´»å‹•", lat: 64.1278, lng: -21.9519, mapLabel: "Sky Lagoon", mapPriority: 1}, // Bathing is an activity
            {åœ°é»: "HarpaéŸ³æ¨‚å»³", æè¿°: "æ›¾è¢«ã€Šç´ç´„æ™‚å ±ã€‹è©•é¸ã€Œå…¨çƒæœ€å€¼å¾—æ—…éŠçš„41å€‹åœ°æ–¹ã€ä¹‹ä¸€", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/e69707fafbb86d7381c6565d441727f7.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.1502, lng: -21.9348, mapLabel: "Harpa Concert Hall and Conference Centre", mapPriority: 5, ç‡Ÿæ¥­æ™‚é–“: "10:00â€“18:00 (å‘¨æ—¥è‡³å‘¨äºŒ)ï¼›10:00â€“20:00 (å‘¨ä¸‰è‡³å‘¨å…­)"},
            {åœ°é»: "å“ˆçˆ¾æ ¼æ—å§†æ•™å ‚( HallgrÃ­mskirkja)", å…‹æœ—: "1,400", æè¿°: "å…¨å†°å³¶æœ€å¤§æ•™å ‚ï¼Œé¢¨æ ¼å‰è¡›ï¼Œå¤–è§€å¦‚è¢«é¢¨åŒ–çš„æŸ±ç‹€ç„æ­¦å²©", ç…§ç‰‡: "https://mimihan.tw/wp-content/uploads/20180429160946_55.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 64.1417, lng: -21.9266, mapLabel: "HallgrÃ­mskirkja", mapPriority: 6, ç‡Ÿæ¥­æ™‚é–“: "10:00~17:00\n æ™¯è§€å¡”ï¼š10:00~16:30"},
            {åœ°é»: "ç§»å‹•: å¸‚å€ â†’ è—æ¹– (42m)", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "è—æ¹–", ç…§ç‰‡: "https://bobbyworld.tw/wp-content/uploads/pixnet/9f13156749eb0d1db3bd5dbd7190ff51.jpg", é¡åˆ¥: "â›± æ™¯é»", lat: 63.8806, lng: -22.4496, mapLabel: "Blue Lagoon", mapPriority: 2, ç‡Ÿæ¥­æ™‚é–“: "08:00â€“22:00"},
           
            {åœ°é»: "ä½é›·å…‹é›…ç¶­å…‹", é¡åˆ¥: "ğŸ¡ ä½å®¿", lat: 64.1466, lng: -21.9426, mapLabel: "é›·å…‹é›…ç¶­å…‹ä½å®¿", mapPriority: 2}
        ]},
        // Day 12
        { dayGroup: "Day 12", dayTitle: "Day 12: 10/16(å››) ", mapCenter: { lat: 64.05, lng: -22.2 }, mapZoom: 9, items: [
            {åœ°é»: "KEF æ©Ÿå ´é‚„è»Šã€æ­æ©Ÿ", æè¿°: "è¦ç¢ºèªä¸‹å¯ä»¥é‚„è»Šçš„æ™‚é–“", é¡åˆ¥: "ğŸš— ç§»å‹•", lat: 63.9850, lng: -22.6056, mapLabel: "KEF Airport", mapPriority: 1},
            {åœ°é»: "10:30ç­æ©Ÿ", é¡åˆ¥: "âœˆï¸ é£›è¡Œ"},
            {åœ°é»: "ç§»å‹•: é›·å…‹é›…ç¶­å…‹ â†’ AMS", é¡åˆ¥: "ğŸš— ç§»å‹•"},
            {åœ°é»: "æŠµé” AMS 15:45  ",  é¡åˆ¥: "âœˆï¸ é£›è¡Œ"},
        ]}
    ];

    const mapsInitialized = {};

    // --- Function to get category class ---
    function getCategoryClass(category) {
        if (!category) return 'cat-default';
        // New Day 0 categories
        if (category.includes('ğŸŒŸ è¡Œç¨‹ç¸½è¦½')) return 'cat-journey-overview';
        if (category.includes('âœˆï¸ é£›è¡Œ')) return 'cat-flight-segment';
        if (category.includes('â³ è½‰æ©Ÿ')) return 'cat-layover-time';
        if (category.includes('ğŸ æŠµé”å¾…è½‰')) return 'cat-arrival-next-leg';
        // Original categories
        if (category.includes('ğŸš— ç§»å‹•')) return 'cat-mov';
        if (category.includes('ğŸ§ åƒå–')) return 'cat-eat';
        if (category.includes('â›± æ™¯é»') || category.includes('ğŸ‘')) return 'cat-see';
        if (category.includes('ğŸ¡ ä½å®¿')) return 'cat-stay';
        if (category.includes('ğŸ­ æ´»å‹•')) return 'cat-act'; // Using ğŸ­ for activities for clarity
        return 'cat-default';
    }

    // --- Image Modal Logic ---
    const modal = document.getElementById("myImageModal");
    const modalImg = document.getElementById("imgModalSrc");
    const modalCloseBtn = document.querySelector(".image-modal-close");

    function openImageModal(imgSrc) {
        if (modal && modalImg) {
            modal.style.display = "block";
            modalImg.src = imgSrc;
        }
    }
    if (modalCloseBtn) {
        modalCloseBtn.onclick = function() {
            if (modal) modal.style.display = "none";
        }
    }
    // Close modal if user clicks outside the image (on the modal background)
    window.onclick = function(event) {
        if (event.target == modal) {
            if (modal) modal.style.display = "none";
        }
    }
    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape" || event.key === "Esc") {
            if (modal && modal.style.display === "block") {
                modal.style.display = "none";
            }
        }
    });


    // --- Function to generate HTML for each day's itinerary ---
    function generateDayHtml(dayData, dayIndex) {
        let itemsHtml = '';
        // Day 0: ç”¨è¡¨æ ¼é¡¯ç¤ºé£›è¡Œè³‡è¨Š
        if (dayIndex === 0 && dayData.isSpecialDay === "departure") {
            const generateTableRow = (item) => `
                <tr>
                    <td>${item.åœ°é» || ''}</td>
                    <td>${item.æè¿° || ''}</td>
                </tr>`;

            itemsHtml += `<table class="itinerary-table">
                <thead>
                    <tr>
                        <th>é …ç›®</th>
                        <th>èªªæ˜</th>
                    </tr>
                </thead>
                <tbody>
                    ${dayData.items.map(generateTableRow).join('')}
                </tbody>
            </table>`;
        } else {
            itemsHtml += '<ul class="itinerary-list">';
            dayData.items.forEach(item => {
                const categoryClass = getCategoryClass(item.é¡åˆ¥);
                const isDrivingInfo = item.é¡åˆ¥ && item.é¡åˆ¥.includes('ğŸš— ç§»å‹•') && item.åœ°é».startsWith("ç§»å‹•:");

                if (isDrivingInfo) {
                    itemsHtml += `<li class="driving-info">${item.åœ°é».replace("ç§»å‹•:", "").trim()}</li>`;
                } else {
                    // æ™¯é»ã€åƒå–ã€æ´»å‹•ï¼šåœ–ç‰‡å·¦ã€æ–‡å­—å³
                    if ((categoryClass === 'cat-see' || categoryClass === 'cat-eat' || categoryClass === 'cat-act' || categoryClass === 'cat-stay') && item.ç…§ç‰‡) {
                        const photoUrls = String(item.ç…§ç‰‡).split(',');
                        const photoUrl = photoUrls[0].trim();
                        itemsHtml += `<li class="itinerary-item">
                            <div style="display:flex;align-items:flex-start;gap:1rem;">
                                <div style="flex-shrink:0;">
                                    <img src="${photoUrl}" alt="${item.åœ°é»} ç¸®åœ–" class="item-photo-thumbnail" onclick="openImageModal('${photoUrl}')">
                                </div>
                                <div style="flex:1;min-width:0;">
                                    <span class="item-category ${categoryClass}">${item.é¡åˆ¥ || 'è³‡è¨Š'}</span>`;
                        if (item.lat && item.lng) {
                            itemsHtml += `<strong><a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.mapLabel || item.åœ°é»)}${item.lat && item.lng ? `&ll=${item.lat},${item.lng}` : ''}" target="_blank" title="åœ¨ Google åœ°åœ–ä¸­æ‰“é–‹">${item.mapPriority}. ${item.åœ°é»}</a></strong>`;
                        } else {
                            itemsHtml += `<strong>${item.åœ°é»}</strong>`;
                        }
                        if (item.æè¿°) itemsHtml += `<div class="item-description">${item.æè¿°}</div>`;
                        if (item.å…‹æœ—) itemsHtml += `<div class="item-description">è²»ç”¨ï¼šç´„ ${item.å…‹æœ—} ISK</div>`;
                        if (item.å°å¹£) itemsHtml += `<div class="item-description">è²»ç”¨åƒè€ƒï¼šç´„ ${item.å°å¹£} TWD</div>`;
                        if (item.ç‡Ÿæ¥­æ™‚é–“) itemsHtml += `<div class="item-description"><span style='color:#005792;font-weight:bold;'>ç‡Ÿæ¥­æ™‚é–“ï¼š</span>${item.ç‡Ÿæ¥­æ™‚é–“}</div>`;
                        if (item.ç¶²å€) itemsHtml += `<div class="item-url"><a href="${item.ç¶²å€}" target="_blank">ç›¸é—œé€£çµ</a></div>`;
                        itemsHtml += `</div></div></li>`;
                    } else {
                        // å…¶ä»–é¡å‹ç¶­æŒåŸæœ¬æ’ç‰ˆ
                        itemsHtml += `<li class="itinerary-item">`;
                        itemsHtml += `<span class="item-category ${categoryClass}">${item.é¡åˆ¥ || 'è³‡è¨Š'}</span>`;
                        if (item.lat && item.lng) {
                            itemsHtml += `<strong><a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.mapLabel || item.åœ°é»)}${item.lat && item.lng ? `&ll=${item.lat},${item.lng}` : ''}" target="_blank" title="åœ¨ Google åœ°åœ–ä¸­æ‰“é–‹">${item.mapPriority ? `${item.mapPriority}. ` : ''}${item.åœ°é»}</a></strong>`;
                        } else {
                            itemsHtml += `<strong>${item.åœ°é»}</strong>`;
                        }
                        if (item.æè¿°) itemsHtml += `<div class="item-description">${item.æè¿°}</div>`;
                        if (item.å…‹æœ—) itemsHtml += `<div class="item-description">è²»ç”¨ï¼šç´„ ${item.å…‹æœ—} ISK</div>`;
                        if (item.å°å¹£) itemsHtml += `<div class="item-description">è²»ç”¨åƒè€ƒï¼šç´„ ${item.å°å¹£} TWD</div>`;
                        if (item.ç¶²å€) itemsHtml += `<div class="item-url"><a href="${item.ç¶²å€}" target="_blank">ç›¸é—œé€£çµ</a></div>`;
                        itemsHtml += `</li>`;
                    }
                }
            });
            itemsHtml += '</ul>';
        }

        let mapHtml = '';
        const hasMapPoints = dayData.items && dayData.items.some(it => it.lat && it.lng && it.mapLabel && typeof it.mapPriority === 'number');
        if (dayData.mapCenter || hasMapPoints) {
            mapHtml = `<div id="mapDay${dayIndex}" class="map-container"></div>`;
        } else if (dayIndex === 0 && dayData.isSpecialDay === "departure") { // Special message for Day 0
             mapHtml = `<p style="text-align:center; padding:10px; color:#555; font-style:italic;">å•Ÿç¨‹æ—¥ï¼Œå°ˆæ³¨é£›è¡Œï¼Œæœ¬åœ°åœ–ç„¡æ™¯é»é¡¯ç¤ºã€‚</p>`;
        }
        else {
            mapHtml = `<p style="text-align:center; padding:10px; color:#777;">æœ¬æ—¥ç„¡åœ°åœ–è·¯ç·šè¦åŠƒã€‚</p>`;
        }
        return `<h2>${dayData.dayTitle}</h2>${itemsHtml}${mapHtml}`;
    }


    // --- Google Maps API Functions ---
    function displayRoute(mapId, locations, mapCenter, mapZoom) {
        const mapElement = document.getElementById(mapId);
        if (!mapElement) {
            console.error("Map element not found:", mapId);
            return;
        }
        if (!google || !google.maps) {
            console.error("Google Maps API not loaded yet.");
            mapElement.innerHTML = "<p style='text-align:center; padding-top:20px;'>åœ°åœ–æœå‹™è¼‰å…¥ä¸­...</p>";
            return;
        }

        if (locations.length === 0 && !mapCenter) {
             mapElement.innerHTML = "<p style='text-align:center; padding-top:20px;'>æœ¬åœ°åœ–ç„¡æ™¯é»å¯é¡¯ç¤ºã€‚</p>";
            return;
        }

        const map = new google.maps.Map(mapElement, {
            zoom: mapZoom || 8,
            center: mapCenter || locations[0]?.location || { lat: 64.9631, lng: -19.0208 } // Iceland center
        });

        if (locations.length === 0) {
            if(mapCenter) new google.maps.Marker({ position: mapCenter, map: map, title: "åœ°åœ–ä¸­å¿ƒ" });
            return;
        }

        if (locations.length === 1) {
            new google.maps.Marker({
                position: locations[0].location,
                map: map,
                label: locations[0].title, // Use title instead of A, B, C
                title: locations[0].title
            });
            map.setCenter(locations[0].location);
            return;
        }

        const directionsService = new google.maps.DirectionsService();
        const directionsRenderer = new google.maps.DirectionsRenderer({
            map: map,
            suppressMarkers: true // Suppress default markers to use custom ones
        });

        const waypoints = locations.slice(1, -1).map(loc => ({
            location: loc.location,
            stopover: true
        }));

        const request = {
            origin: locations[0].location,
            destination: locations[locations.length - 1].location,
            waypoints: waypoints,
            optimizeWaypoints: true, // Usually good to keep true for complex routes
            travelMode: google.maps.TravelMode.DRIVING
        };

        directionsService.route(request, function(result, status) {
            if (status == 'OK') {
                directionsRenderer.setDirections(result);

                // Add custom markers for each location
                locations.forEach((loc, index) => {
                    new google.maps.Marker({
                        position: loc.location,
                        map: map,
                        label: `${index + 1}`, // Use numbers instead of A, B, C
                        title: loc.title
                    });

                    // Add number to the corresponding itinerary item
                    const itineraryItems = document.querySelectorAll('.itinerary-item strong');
                    itineraryItems.forEach((item, itemIndex) => {
                        if (item.textContent.includes(loc.title)) {
                            item.innerHTML = `<span style='color: #005792; font-weight: bold;'></span>` + item.innerHTML;
                        }
                    });
                });
            } else {
                console.error('Directions request failed for ' + mapId + ' due to ' + status, result);
                mapElement.innerHTML = `<p style='text-align:center; padding-top:20px;'>åœ°åœ–è·¯ç·šè¼‰å…¥å¤±æ•— (${status})ã€‚</p>`;
                // Fallback: place individual markers if directions fail
                locations.forEach((loc, index) => {
                    new google.maps.Marker({
                        position: loc.location,
                        map: map,
                        label: `${index + 1}`, // Use numbers instead of A, B, C
                        title: loc.title
                    });
                });
            }
        });
    }


    // --- Tab Switching Logic ---
    function openDayTab(dayIndex) {
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(btn => btn.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));

        if (tabButtons[dayIndex]) {
            tabButtons[dayIndex].classList.add('active');
        }
        if (tabContents[dayIndex]) {
            tabContents[dayIndex].classList.add('active');

            // Save active tab index to localStorage
            try {
                localStorage.setItem('activeItineraryTabIndex', dayIndex.toString());
            } catch (e) {
                console.warn("Could not save tab state to localStorage:", e);
            }


            const dayData = allItineraryData[dayIndex];
            const mapId = `mapDay${dayIndex}`;

            const locationsForMap = dayData.items
                .filter(item => item.lat && item.lng && item.mapLabel && typeof item.mapPriority === 'number')
                .sort((a, b) => a.mapPriority - b.mapPriority)
                .map(item => ({ location: { lat: item.lat, lng: item.lng }, title: item.mapLabel }));

            const shouldInitializeMap = dayData.mapCenter || locationsForMap.length > 0;

            if (shouldInitializeMap && !mapsInitialized[mapId]) {
                if (typeof google !== 'undefined' && google.maps) {
                    displayRoute(mapId, locationsForMap, dayData.mapCenter, dayData.mapZoom);
                    mapsInitialized[mapId] = true;
                } else {
                    console.warn("Google Maps API not ready when trying to init map for tab:", mapId);
                    const mapElement = document.getElementById(mapId);
                    if(mapElement) mapElement.innerHTML = "<p style='text-align:center; padding-top:20px;'>åœ°åœ–æœå‹™ç­‰å€™è¼‰å…¥...</p>";
                }
            }
        }
    }

    // --- Initialize Page ---
    function initPage() { // This is now the callback for Google Maps API
        const tabContainer = document.getElementById('tabContainer');
        const tabContentContainer = document.getElementById('tabContentContainer');


        allItineraryData.forEach((dayData, index) => {
            // æ”¹ç‚º <a> ä¸¦åŠ ä¸Š href
            const tabButton = document.createElement('a');
            tabButton.className = 'tab-button';
            tabButton.textContent = dayData.dayGroup;
            tabButton.href = `#day${index}`;
            tabButton.onclick = (e) => {
                e.preventDefault();
                window.location.hash = `#day${index}`;
                openDayTab(index);
            };
            tabContainer.appendChild(tabButton);

            const tabContent = document.createElement('div');
            tabContent.className = 'tab-content';
            tabContent.id = `dayContent${index}`;
            if (dayData.isSpecialDay === "departure") { // Add class for Day 0 styling
                tabContent.classList.add('departure-day-content');
            }
            tabContent.innerHTML = generateDayHtml(dayData, index);
            tabContentContainer.appendChild(tabContent);
        });

        // å…ˆåˆ¤æ–· hash
        let initialTabIndex = 0;
        const hash = window.location.hash;
        if (hash && hash.startsWith('#day')) {
            const hashIndex = parseInt(hash.replace('#day', ''), 10);
            if (!isNaN(hashIndex) && hashIndex >= 0 && hashIndex < allItineraryData.length) {
                initialTabIndex = hashIndex;
            }
        } else {
            // fallback: localStorage
            try {
                const savedTabIndex = localStorage.getItem('activeItineraryTabIndex');
                if (savedTabIndex !== null) {
                    const parsedTabIndex = parseInt(savedTabIndex, 10);
                    if (!isNaN(parsedTabIndex) && parsedTabIndex >= 0 && parsedTabIndex < allItineraryData.length) {
                        initialTabIndex = parsedTabIndex;
                    }
                }
            } catch (e) {
                console.warn("Could not read tab state from localStorage:", e);
            }
        }

        if (allItineraryData.length > 0) {
            openDayTab(initialTabIndex); // Open the stored tab or the first tab
        }

        // ç›£è½ hashchangeï¼Œå…è¨±ç›´æ¥åˆ‡æ›
        window.addEventListener('hashchange', function() {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#day')) {
                const hashIndex = parseInt(hash.replace('#day', ''), 10);
                if (!isNaN(hashIndex) && hashIndex >= 0 && hashIndex < allItineraryData.length) {
                    openDayTab(hashIndex);
                }
            }
        });
    }
    </script>
    <script type="module">
    import { GOOGLE_MAPS_API_KEY } from './const.js';

    // å‹•æ…‹è¼‰å…¥ Google Maps APIï¼Œé¿å… API KEY å¯«æ­»åœ¨ HTML
    function loadGoogleMapsApi() {
        if (typeof GOOGLE_MAPS_API_KEY === 'undefined' || !GOOGLE_MAPS_API_KEY || GOOGLE_MAPS_API_KEY.indexOf('__GOOGLE_MAPS_API_KEY__') === 0) {
            console.error('Google Maps API é‡‘é‘°æœªè¨­å®šï¼Œè«‹æª¢æŸ¥ const.js');
            return;
        }
        var script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&callback=initPage&libraries=routes`;
        script.async = true;
        script.defer = true;
        document.body.appendChild(script);
    }
    // é é¢è¼‰å…¥å¾ŒåŸ·è¡Œ
    window.addEventListener('DOMContentLoaded', loadGoogleMapsApi);
</script>
</body>
</html>